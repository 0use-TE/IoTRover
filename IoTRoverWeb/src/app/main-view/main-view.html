<div fxLayout="column" style="height: 100%;">
  <div style="flex: 1;">
    <div fxLayout="row" fxLayoutAlign="center">
      <div fxFlex.xs="100%" fxFlex.sm="80%" fxFlex.gt-sm="50%" style=" padding: 16px; margin: 8px;">
        <mat-card class="example-card" appearance="outlined">
          <mat-card-header>
            <mat-card-title style="font-weight: bold;">信息面板:</mat-card-title>
          </mat-card-header>
          <mat-card-content style="margin: 8px;">

            <!-- 速度设置部分 -->
            <div fxLayout.xs="column" fxLayout.gt-xs="row" fxLayoutAlign="center center" style="align-items: center;">
              <label class="label">设置速度:{{speed()}}</label>
              <div fxFlex></div>
              <mat-slider min="0" max="100" style="width: 70%;" step="5">
                <input matSliderThumb [(ngModel)]="speed" />
              </mat-slider>
            </div>

            <div fxLayout.xs="column" fxLayout.gt-xs="row" fxLayoutAlign="center center" style="align-items: center;">
              <label class="label">实际速度:{{currentSpeed()}}</label>
              <div fxFlex></div>
              <mat-slider min="0" max="100" style="width: 70%;" (mousedown)="$event.preventDefault()"
                (touchstart)="$event.preventDefault()">
                <input matSliderThumb [value]="currentSpeed" />
              </mat-slider>
            </div>

          </mat-card-content>
        </mat-card>
      </div>
    </div>
    <!-- WebSocket面板 -->
    <div fxLayout="row" fxLayoutAlign="center" style="flex: 0;">
      <div fxFlex.xs="100%" fxFlex.sm="80%" fxFlex.gt-sm="50%" style="padding: 16px; margin: 8px;">
        <mat-card class="example-card" appearance="outlined">
          <mat-card-header>
            <mat-card-title style="font-weight: bold;">WebSocket 连接</mat-card-title>
          </mat-card-header>
          <mat-card-content style="margin: 8px;">
            <div fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="16px">

              <mat-form-field fxFlex>
                <mat-label>IP地址</mat-label>
                <input matInput placeholder="请输入要连接的IP地址" [(ngModel)]="ipAddress">
              </mat-form-field>

              <mat-form-field style="width: 100px;">
                <mat-label>端口</mat-label>
                <input matInput placeholder="8080" [(ngModel)]="port">
              </mat-form-field>

            </div>
          </mat-card-content>

          <mat-card-actions fxLayout="row" fxLayoutAlign="end">
            @if(wsService.isConnected())
            {
            <button matButton="elevated" (click)="cancelConnect()">断开</button>
            }
            @else{
            <button matButton="elevated" (click)="connectWebSocket()">连接</button>
            }
          </mat-card-actions>
        </mat-card>
      </div>
    </div>
  </div>

  <mat-divider></mat-divider>
  <div #joystickArea style="width: 100%; height: 200px;">

  </div>
</div>